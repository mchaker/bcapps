# XML like (but not true XML) description of various computer
# programming languages used by bc-lang-convert.pl

# fields are:
#
# extension: the file extension associated with this language
# prefix: programs in this language must start with this
# postfix: programs in this language must end with this
# fdef: the template for a function definition in this language
# pdef: the template for printing the results of a function call
# math: The "math" object in this language ("Math", "math", or "" = not given)
# comment: single line comment
# mcomment: multi-line comment
# run: how to run a program

# macros are:

# NOTE: <vars> are the function's argument's names and <args> are the
# values assigned to these arguments during testing

# <fname>: function name
# <vars>: arguments to function, as comma separated list (like "x,y,z")
# <dvars>: arguments to function, preceded by $ (for PHP) (like "$x,$y,$z")
# <mvars>: arguments to function, followed by underscore (like "x_,y_,z_")
# <body>: body of function (code generated by bc-lang-convert.pl)
# <args>: arguments to the function for testing (like "1,2,3")
# <cval>: the correct or expected value of the function
# <comment>: the contents of a comment
# <file>: file containing code

# TODO: implement mvars

# TODO: think there are better pdefs for some of these languages

# TODO: reconsider extension for Mathics, but I may want to use .m for
# Mathematica itself

# TODO: using <comment> as both a delimiter and a placeholder is seriously ugly

<language name="mathics">
<extension>mathics</extension>
<fdef><fname>[<mvars>] = <body>;</fdef>
<pdef>Print[<fname>[<args>]]</pdef>
<comment>(* <comment> *)</comment>
<mcomment>(*

<comment>

*)
</mcomment>
<run>mathics <file></run>
</language>

<language name="perl">
<extension>pl</extension>
<fdef>sub <fname> {my(<dvars>) = @_; return <body>}</fdef>
# the pdef below is for if/when I move to list returns
<pdef comment>print join(",", @{<fname>(<args>)}),"\n";</pdef>
<pdef>print <fname>(<args>),"vs <cval>","\n";</pdef>
<pdef comment>print @{<fname>(<args>)};</pdef>
<comment># <comment></comment>
<mcomment>
=item comment

<comment>

=cut
</mcomment>
<run>perl <file></run>
</language>

<language name="ruby">
<extension>rb</extension>
<fdef>def <fname>(<vars>) <body> end</fdef>
<pdef>print <fname>(<args>),"vs <cval>","\n"</pdef>
<math>Math</math>
<comment># <comment></comment>
<mcomment>
=begin

<comment>

=end
</mcomment>
<run>ruby <file></run>
</language>

<language name="python">
<extension>py</extension>
<fdef>def <fname>(<vars>):
 return <body>
</fdef>
<pdef>print(<fname>(<args>),"vs <cval>")</pdef>
# really shouldn't need this "prefix"
<prefix>import math;</prefix>
<math>math</math>
<comment># <comment></comment>
# NOTE: python does not have multiline comments, this is a hack!
<mcomment>"""<comment>"""</mcomment>
<run>python <file></run>
</language>

<language name="javascript">
<extension>js</extension>
<fdef>function <fname>(<vars>) {return <body>;}</fdef>
<pdef>print(<fname>(<args>));</pdef>
<pdef>print(<fname>(<args>),"vs <cval>");</pdef>
<math>Math</math>
<comment>// <comment></comment>
<mcomment>/* <comment> */</mcomment>
<run>js <file></run>
</language>

<language name="lua">
<extension>lua</extension>
<fdef>function <fname>(<vars>) return <body> end</fdef>
<pdef>print(<fname>(<args>),"vs <cval>")</pdef>
<pdef>print(<fname>(<args>));print("vs <cval>")</pdef>
<math>math</math>
<comment>-- <comment></comment>
<mcomment>-- [[ <comment> ]]</mcomment>
<run>lua <file></run>
</language>

<language name="php">
<extension>php</extension>
<fdef>function <fname>(<dvars>) {return <body>;}</fdef>
<pdef comment>print_r(<fname>(<args>)." vs <cval>\n");</pdef>
<pdef>print_r(var_dump(<fname>(<args>))." vs <cval>\n");</pdef>
# TODO: not including "#" style comment for simplicity for now
<comment>// <comment></comment>
<mcomment>/* <comment> */</mcomment>
# prefix/postfix required for standard "php codefile" run
# TODO: find php options that dont require prefix/postfix?
<prefix><?php</prefix>
<postfix>?></postfix>
<run>php <file></run>
</language>

<language name="R">
<extension>r</extension>
<fdef><fname> <- function(<vars>) {return(<body>)}</fdef>
<pdef>print(<fname>(<args>)); print("exp: <cval>")</pdef>
<comment># <comment></comment>
<run>R --slave --no-save < <file></run>
</language>

# TODO: perl and Mathematica (though I generate FROM Mathematica, so
# maybe pointless)

